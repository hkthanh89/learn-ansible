---
- hosts: node00
  gather_facts: no
  vars:
    admin_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          61356433616330386162363862336632343063306634666132366131363661393735323431383365
          6635346636646563313839663630383332333131313363320a326461626536373738316264363139
          37373334313032386435353437653263653933656134626235633061316666643865653737623062
          3963346564613538370a613336386138383938366665323164306633613535353232336561656166
          3034
    developer_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          35373663303137313331383036393464623336333832386234356664666234383838313063333735
          3634383136333665336634343365386135653161363666380a646362376436373338633764383937
          35653861333737333164313535626237383164363237386537633364653661313736646434333430
          6634316331653932310a303430663863653232326237633431646533643835663631663937353161
          3462
  tasks:
    - name: Include user.yml
      include_vars:
        file: data/users.yml
    - name: Creating admins
      user:
        name: "{{ item }}"
        password: "{{ admin_pass | string | password_hash('sha512') }}"
        groups: wheel
      with_items: "{{ admins | list }}"

    - name: creating developers
      user:
        name: "{{ item }}"
        password: "{{ developer_pass | string | password_hash('sha512') }}"
        home: /var/www
      with_items: "{{ developers | list }}"
